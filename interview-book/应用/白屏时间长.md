# 解决白屏时间长的问题其本质是缩短用户从发送请求到页面首次可交互（FCP）的时间

1. 减少资源加载与阻塞

- 合并与压缩文件

  - 合并 js、css 文件，减少 http 请求次数，使用 webpack 等工具压缩代码（如 terser、cssnano）

  - 图片优化：压缩工具（TinyPNG）、转换为 Base64（适用于小图）、使用 webp 格式

- 延迟加载非关键资源

  - 图片懒加载：img lazy 属性 。intersection observer API
  - 非首屏 css、js 延迟加载： 使用<link rel="preload" as="style" href="xxx.css"> 预加载预加载关键资源，非关键资源使用 defer 或者 async 异步加载

- 代码分割与按需加载
  - 路由懒加载
  - 使用动态的 import 按需加载模块，避免一次性加载过大 js 包

2. 优化渲染流程

- 调整加载顺序

  - css 放在 header 中，优先加载，避免阻塞渲染，js 放在页面底部或者使用 defer 属性延迟加载

- 分帧渲染与放卡顿

  - 分批次渲染大数据量组件
  - 避免同步阻塞操作：减少长任务（如复杂计算），拆分到 requestIdleCallback

3. 服务端优化

- 启用 http2 与 cdn 加速
  - http2 的多路复用减少链接次数，提升资源并行加载效率
  - cdn 分发静态资源，减少网络传输时间
- 服务端渲染 ssr
- 缓存策略
  - 设置强缓存 cache-control：maxage 和 协商缓存 Etag,减少重复请求
  - 浏览器 DNS 缓存有优化，预加载关键域名

4. 用户体验增强

- 使用骨架屏与加载状态

  - 静态骨架屏（base64 图片）或者动态带点啊生成骨架屏，提前展示页面结构，缓解用户等待时间
  - 使用 polyfill 或者占位符渐进形式内容

- 监控与异常处理
  - 通过 document 元素检测或者第三方工具 lightHouse 监控白屏时间
  - 捕获 js 错误，避免因渲染失败导致白屏

5. 移动端优化与 hybrid 场景优化

- webview 启动优化
  - 预加载 webview 实例说这使用 全局 webview 池，减少冷启动的耗时
  - 离线包技术：将关键资源与下载至本地，若望环境下直接加载
- 分屏渲染和虚拟列表
  - 大数据采用虚拟滚动，仅渲染可是区域内容
